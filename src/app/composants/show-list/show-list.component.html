<app-menu></app-menu>
<div id="main">
<div class="card shadow">
  <div class="card-header"><span i18n>Liste des présentations</span></div>
	<div class="card-header shadow-sm">
		<div class="row">
			<div class="form-group col-sm-4 label-nobr">
				<button type="button" (click)="goToRefreshListCategorie()" class="btn bg-gradient btn-primary btn-sm" style="margin-right: 5px;"><i class="fa-solid fa-rotate"></i>&nbsp;<span i18n>Actualiser</span></button>
			</div>
		</div>
	</div>
</div>

@for (categorie of categories; track categorie.numeroCategorie) { @if (categorie.available) {
<div class="card shadow overflow-x-auto" style="height:22rem;">
  <div class="card-header">
    {{ categorie.libelle }}&nbsp;&nbsp;&nbsp;&nbsp;
    <button type="button" (click)="lierProductions(categorie.numeroCategorie)" class="btn bg-gradient btn-primary btn-sm" style="margin-right: 5px;" i18n-tootip tooltip="Rattacher des productions et les ordonner" placement="right" container="body"><i class="fa-solid fa-link"></i>&nbsp;<span i18n>Affilier</span></button>
    @if (categorie.uploadable) { }
    @if (categorie.pollable) { }
    @if (categorie.computed) { }
    @if (categorie.displayable) { }
  </div>
  <div class="card-body">
@for (production of productions; track production.numeroProduction) { @if (categorie.numeroCategorie == production.numeroCategorie) {
    <div class="card shadow" style="max-height:20rem;">
      <img src="{{ production.vignette }}" class="img-fluid card-img-top pointeur-souris" (click)="formProduction(production.numeroProduction)">
      <div class="card-header">
        <span class="card-title">@if (production.type === types[0].key) { <i class="fa-solid fa-square-binary"></i> } @else if (production.type === types[1].key) { <i class="fa-solid fa-image"></i> } @else if (production.type === types[2].key) { <i class="fa-solid fa-music"></i> } @else if (production.type === types[3].key) { <i class="fa-solid fa-video"></i> } @else if (production.type === types[4].key) { <i class="fa-solid fa-comment"></i> } @else { <i class="fa-solid fa-question"></i> }
          <a (click)="formProduction(production.numeroProduction)" class="text-primary pointeur-souris" style="margin-left:7px;">{{ production.titre }}</a></span><br/>
          <small><span class="text-muted">par</span> {{ production.auteurs }} @if (production.groupes) { @if (production.groupes.length > 0) { &nbsp;/&nbsp;{{ production.groupes }} } }</small>
      </div>
      <div class="card-body">
        <small><span class="text-muted">sur</span> {{ production.plateforme }}</small><br/>
        <small>{{ production.commentaire }}</small><br/>
        <small class="text-warning">{{ production.informationsPrivees }}</small>
      </div>
      <div class="card-footer d-flex justify-content-between">
        <i class="fa-solid fa-download text-primary pointeur-souris" (click)="getFile(production.numeroProduction, production.nomArchive)" tooltip="{{ production.nomArchive }} (v{{ production.numeroVersion }})" placement="top" container="body"></i>
        <i class="fa-solid fa-user-tie text-muted" style="margin-left:7px;" i18n-tootip tooltip="géré par {{ production.nomGestionnaire }}" placement="top" container="body"></i>
      </div>
    </div>
} }
  </div>
</div>
} }

</div>
